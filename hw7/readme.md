# Урок 7. Основы работы Linux
Для работы понадобится установленный *Linux* (например *Ubuntu*)
1. Зайти в консольный режим GRUB:
 * просмотреть содержимое директорий дисков,
 * вывести на экран содержимое какого-нибудь текстового файла (например `.conf`) с помощью `cat`
 * перед перезагрузкой в Linux в виртуальной машине создать новый диск, отформатировать его, создать раздел и несколько файлов.
 * изучить работу команд set root, ls, cat на примере разделов разных дисков.
2. Запустить из GRUB Linux в многопользовательском и однопользовательском режиме (консоль восстановления).
3. **Распаковать `initrd`. Какие скрипты, программы содержатся.** - задание в файле [initrd.txt](initrd.txt)
4. **В консоли *Linux* просмотреть дерево `/proc`. Какие полезные сведения можно использовать из находящихся в директории данных.** - можно посмотреть информацию о процессах (статус), процессоре, памяти. Есть возможность не только получать информацию, но и изменять её.
5. \* Установить X-Server (например XMing) на Windows-машине, запустить десктопное приложение Linux на рабочем столе Windows, подключившись через putty и включив туннелирование X11 трафика.
6. \* Установить openvpn сервер, проследить с помощью tcpdump или wireshark движение трафика. Обратить внимание, какие части выполняются в пользовательском пространстве, а какие на уровне ядра.
7. \* Написать (или найти готовый код и разобрать) модуль ядра, запускающий поток ядра.

Вопросы от меня:
- **что такое GRUB?** - загрузчик операционной системы.
- **где находится GRUB** - GRUB2 разбит на части, так называемые *stages*. *stage 1* (boot.img) хранится в MBR или в VBR. основная задача загрузить *stage 1.5* (core.img). Эта стадия записывается в сектора между MBR и началом первого раздела (есть свободные 62 сектора). На данной стадии подгружается драйвер FS поэтому *stage 2* может уже загрузиться по пути `/boot/grub` из любого места.
- **для чего нужен initrd?** - содержит необходимые драйвера и программы для старта ОС. подготовка VFS. можно собрать специальными средствами свой.
- **как обойтись без initrd?** - да, можно встроить все необходимые драйвера в ядро ОС.
- **в каких случаях перезагрузка сервера необходима?** - когда какие-то параметры мы не можем изменить налету. при возникновении ошибки ядра.
- **что такое пространство пользователя и пространство ядра?** - в пространстве ядра работают ядро ОС и его модули (кольцо защиты 0), в пользовательском - демоны, оболочки и утилиты (кольцо защиты 3). так же это соответствующие области памяти.
- **можно ли пользователю root сделать UID отличный от нуля (если можно, что призойдет)?** - он станет обычным пользователем без полного доступа к системе.

По открытому вопросу:

Система Ubuntu. Мне для записи в каталог другого пользователя понадобилось перезайти в систему, т.к. хотя я и был добавлен в группу, но в рамках сессии обновления моего членства в новой группе не произошло. после этого запись в каталог была успешно произведена.
